var signup=require("./sign-up.js");$(function(){"use strict";var e=$(window),t=$("body");(function(){var t=$("section.sign-in"),n=$("#patches"),r=null,i=n.children();$(document).on("preSignUp",function(e){n.hide()}),$(document).on("dismissSignUp",function(e){n.show()}),e.on("resize",function(){n.css({left:Math.round(e.width()/2),top:Math.round(e.height()/2)})}).trigger("resize"),n.on("mouseleave",function(){o(r)});var s=function(e){if(e.hasClass("hover")||r&&r[0]===e[0])return;r&&o(r),e.addClass("hover"),e.css({zIndex:2}),r=e},o=function(e){if(!e)return;var t=parseInt(e.css("marginTop"));e.removeClass("hover"),e.css({zIndex:1}),r&&e[0]===r[0]&&(r=null)},u=function(){var e=[],t=!1,n=10,r=0,i=function(){if(!e.length){t=!1;return}while(r<n&&e.length)r++,e.shift()(function(){r--,i()})};return{push:function(n){e.push(n),t||(t=!0,i())}}}(),a=6,f=5,l=60,c=253,h=2*c/Math.sqrt(3),p=c/(2*Math.sqrt(3)),d=0,v=2*d,m=0,g=50,y=0,b=0,w={},E=function(e,t){t-=Math.ceil(a/2);var n=t%2?0:(c+d)/2;return{x:Math.floor(-c/2+e*(c+d)+n)+m,y:Math.floor(-h/2+t*(3*(c/2)/Math.sqrt(3)+d))+g}};if(i.length<l)for(var S=0,x=l-i.length;S<x;S++)n.append($(i[S]).clone());n.children().each(function(){var e=$(this).addClass("patch").attr({"data-i":y,"data-j":b}),t=e.children().css({opacity:0}),n=E(y,b);e.css({marginTop:n.y,marginLeft:n.x}),e.lazyload({src:e.attr("data-image"),success:function(n,r){u.push(function(i){e.addClass("loaded"),t.css({backgroundImage:"url("+n+")"}),r<100?(t.css({opacity:1}),window.setTimeout(i,10)):(t.animate({opacity:1},300),window.setTimeout(i,300))})}}),w[y+","+b]=e,b++,b===a&&(y=y===0?1:y<0?-y+1:-y,b=0)}),n.on("mousemove",".patch",function(e){var t=$(this),n=e.offsetX,r=e.offsetY;if(typeof n=="undefined"||typeof r=="undefined"){var i=$(e.target).offset();n=e.pageX-i.left,r=e.pageY-i.top}if(r>p&&r<h-p)return s(t);var o=r>p?h-r:r,u=Math.round(n-c/2),a=Math.abs(u)>Math.ceil(o/p*(c/2)+v/2);if(!a)return s(t);var f=u<0,l=r<=p,d=parseInt(t.attr("data-i")),m=parseInt(t.attr("data-j"));m+=r>p?1:-1,m%2!==0?f&&d--:f||d++;var g=d+","+m;w.hasOwnProperty(g)&&s(w[g])})})(),function(){signup.init()}();switch(window.location.hash){case"#join":window.setTimeout(function(){$("section.join .join").trigger("click")},250);break;case"#signin":var n=$(".sign-in");$(".dropdown-toggle",n).trigger("click"),window.setTimeout(function(){$("#field-signin-nickname").trigger("focus")},20)}})